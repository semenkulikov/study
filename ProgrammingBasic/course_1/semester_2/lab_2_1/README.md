# Лабораторная работа №1. Разработка библиотеки для операций над множествами

## Описание проекта

Данный проект представляет собой реализацию библиотеки для выполнения операций над множествами на языке C с использованием битовых структур. Библиотека включает реализацию базовых операций над множествами:
- Включение (A ⊆ B) и строгое включение (A ⊂ B)
- Объединение (A ∪ B)
- Пересечение (A ∩ B)
- Разность (A – B)
- Симметрическая разность (A △ B)
- Дополнение

Реализация библиотеки сопровождается модульными тестами, автоматизированной сборкой с помощью Make и использованием инструментов статического и динамического анализа кода (valgrind, clang-format, AddressSanitizer, MemorySanitizer, cppcheck).

## Цель работы и постановка задач

Цель работы – изучить методы реализации операций над множествами в языке C с применением инструментов разработки в ОС Линукс. Основные задачи:
- Реализовать базовые операции над множествами с использованием битовых структур.
- Освоить динамическое выделение памяти, тестирование (assert) и автоматизированный анализ кода.
- Использовать Make для автоматизации сборки и очистки проекта.
- Выполнить индивидуальное задание по вычислению теоретико-множественного выражения (вариант 23).

## Структура проекта
```
/lab_2_1
│── src/
│ │── bitset/
│ │ │── bitset.c  // Реализация функций для операций над множествами
│ │ │── bitset.h  // Заголовочный файл с описанием структуры и функций работы с множествами
│ │── output/
│ │ │── output.c  // Реализация функций вывода
│ │ │── output.h  // Интерфейс для абстрактного вывода данных (stdout, stderr и т.д.) 
│ │── main.c  // Основная программа, демонстрирующая использование библиотеки.
│── tests/
│ │── tests.c  // Модуль тестирования библиотеки (функциональное тестирование, проверка граничных значений, производительности)
│── Makefile  // Makefile для сборки, тестирования и очистки проекта
│── README.md  // Описание проекта
```

## Инструкции по сборке и запуску
Для сборки проекта из корневого каталога используйте команду: `bash make`

Это скомпилирует основное приложение и создаст исполняемый файл `bitset_main.o`

Для запуска основной программы: `./bitset_main.o`

Для сборки и запуска тестов: `make test`

Для очистки скомпилированных файлов: `make clean`

Для полной пересборки проекта (очистка, сборка и запуск тестов): `make rebuild`

## Используемые инструменты для отладки и анализа кода
* **Make**: автоматизация сборки и управления зависимостями.
* **Valgrind**: анализ утечек памяти. Пример использования: `valgrind --leak-check=full --show-leak-kinds=all ./bitset_main.o`
* **clang-format**: автоматическое форматирование кода согласно выбранному стилю (например, Google style). Пример использования: `clang-format -style=Google -i src/*.c src/bitset/*.c src/output/*.c tests/*.c`
* **AddressSanitizer (ASan)**: обнаружение ошибок работы с памятью (выход за границы массива, двойное освобождение и т.д.). Пример компиляции: `gcc -fsanitize=address -g -I src/bitset -I src/output -o bitset_main.o src/main.c src/bitset/bitset.c src/output/output.c`
* **MemorySanitizer (MSan)**: проверка использования неинициализированной памяти. Пример компиляции: `clang -fsanitize=memory -g -I src/bitset -I src/output -o bitset_main.o src/main.c src/bitset/bitset.c src/output/output.c`
* **cppcheck**: статический анализ кода на предмет потенциальных ошибок (выход за границы массива, утечки памяти, разыменование нулевых указателей и т.д.). Пример использования: `cppcheck --enable=all src/ tests/`

## Описание реализации библиотеки
Библиотека реализована на языке C и использует представление множеств в виде битового массива (битовой структуры).

**Основные функции:**
* Создание и уничтожение множества: Выделение памяти с помощью `calloc`, освобождение через `free`.
* Добавление элемента и проверка наличия: Использование побитовых операций (сдвиги, AND, OR) для работы с битовыми масками.
* Операции над множествами:
  * Объединение: Побитовое ИЛИ (OR)
  * Пересечение: Побитовое И (AND)
  * Разность: Побитовое И с отрицанием второго множества
  * Симметрическая разность: Побитовое исключающее ИЛИ (XOR)
  * Дополнение: Побитовое отрицание (NOT) с маскированием лишних бит в последнем блоке
  * Проверка включения: Сравнение битовых масок для определения, является ли одно множество подмножеством другого.


## Описание индивидуального задания (вариант 23)
В рамках индивидуального задания необходимо реализовать программу для вычисления теоретико-множественного выражения.

Вариант 23:

```
A∪B−C∩DΔC B−A ∪ ∩D
```

_Примечание:_
Множества A, B, C, D, а также универсальное множество подбираются для тестирования самостоятельно.

Программа должна принимать на вход исходные множества, выполнять последовательность операций согласно заданному выражению с использованием функций библиотеки и выводить результат. Детали реализации (разбор выражения, алгоритм вычисления) описаны в комментариях к коду индивидуального задания.

## Тестирование и результаты
Были разработаны тесты для:

* Проверки базовых операций (создание, добавление, проверка принадлежности)
* Граничных условий (элементы с индексами 0 и capacity-1)
* Операций объединения, пересечения, разности и симметрической разности
* Операций дополнения и проверки включения множеств
* Измерения производительности (добавление большого числа элементов)

Все тесты можно запустить через `make test`

## Автор и лицензия
Автор: Сайфутдинов С.В, ПВ-241

Лицензия: Проект распространяется под лицензией MIT
